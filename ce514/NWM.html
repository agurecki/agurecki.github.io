<html>
<head>
  <title>NWM Forecast Viewer</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="../style.css">  

  <style>
    #forecast-container {
  display: none;
  margin-top: 20px;
  border: 1px solid #dee2e6; /* Light gray border */
  padding: 20px;
  border-radius: 8px;
  background-color: white; /* White background for the forecast area */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow */
}

#streamflowChart {
  margin-top: 20px;
}
  </style>
</head>

  
<body>
    <header>
        <h1>Amber Allen</h1>
      <h2>A8 - National Water Model</h2>
        <p>CE 514 | Winter 2025 | February 11, 2025</p>
    </header>

    <div class="container">
        <section>
  <h1>National Water Model (NWM) Forecasts</h1>
  <h2>Overview</h2>
<p>The <strong>National Water Model (NWM)</strong> is a hydrologic model developed by the 
<strong>National Oceanic and Atmospheric Administration (NOAA)</strong> to provide continuous, 
high-resolution forecasts of streamflow and hydrologic conditions across the United States. 
It integrates <strong>meteorological, land surface, and hydrologic data</strong> to simulate 
water movement through the nation's rivers, lakes, and streams.</p>

<ul>
  <li><strong>Real-time and Forecasted Streamflow Predictions:</strong> Provides hourly, daily, 
      and seasonal forecasts for over <strong>2.7 million stream reaches</strong> in the U.S.</li>
  <li><strong>High-Resolution Hydrologic Modeling:</strong> Uses the <strong>National Hydrography Dataset (NHDPlus)</strong> 
      for detailed river network simulations.</li>
  <li><strong>Multiple Forecast Scenarios:</strong> Includes short-range (hourly up to 18 hours), 
      medium-range (10-day), and long-range (30-day) forecasts, as well as retrospective analyses 
      for trend studies.</li>
  <li><strong>Flood and Drought Monitoring:</strong> Supports emergency management, water resource 
      planning, and flood risk mitigation efforts.</li>
  <li><strong>Data Assimilation:</strong> Incorporates real-time observations from stream gauges, 
      radar, and satellite data to improve accuracy.</li>
</ul>

<p>The NWM is a <strong>critical tool for water resource managers, emergency responders, 
and researchers</strong>, providing valuable insights into hydrologic conditions to enhance 
decision-making and preparedness.</p>
          </section>
    </div>

      <div class="container">
        <section>
  <h2>Resources</h2>
  <p>Learn more about the NWM:</p>
  <ul>
    <li><a href="https://water.noaa.gov/about/nwm">NOAA NWM Overview</a></li>
    <li><a href="https://www.sciencedirect.com/science/article/pii/S1364815224001841">ScienceDirect Paper</a></li>
    <li><a href="https://onlinelibrary.wiley.com/doi/full/10.1111/1752-1688.13184">Wiley Online Library Paper</a></li>
  </ul>
        </section>
      </div>

      <div class="container">
        <section>
  <h2>Enter Reach ID:</h2>
          <p>Browse the <a href="https://water.noaa.gov/#@=-96.401081,38.1465724,3.6863675&b=topographic&g=obsFcst,1!1!1!1!1!1!1!1!1!1!1!1!1!1!1!0!0!0!0!0,0.5,1!1!1!1!0,0,0&ab=0,0,#D94B4A,1,1,1,#cccccc,1,0,0,#B243B1,1,0,0,#98E09A,1&a=hydrologic,0.35&s=0,0,0.9,0.9&n=false,#72afe9,0.9,0,0.9,0,0.9&p=false,0.75,0,7,0,1,2025,2,7,0&d=0,0,1,1,1,1,1,1,#006EFF,1,#006EFF,1,#006EFF,1,#006EFF,1,#006EFF&q="
                          >National Water Prediction Service</a> 
            website to find the Reach ID of your water system of interest. </p>
  <input type="text" id="reachIdInput" placeholder="Enter a Reach ID (e.g., 12121104)">
  <button onclick="getForecast()">Get Forecast</button>
        </section>
      </div>
  
  <div id="forecast-container">
    <table id="timeseries-datatable">
      <thead>
        <tr>
          <th>Timestamp</th>
          <th>Flow value</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <canvas id="streamflowChart"></canvas>
  </div>

  <div id="container">
    <section>
    <h2>How It Works</h2>
    <p>This web application retrieves NWM short-range forecasts using the NOAA NWPS API. The user enters a Reach ID, which is a unique identifier for a river segment. The application then makes a request to the NOAA API for the forecast data associated with that Reach ID. The retrieved data (time and streamflow values) is then displayed in a table and visualized in a chart using Chart.js.  If an error occurs during the API call or data processing, an alert message is displayed to inform the user.</p>
    <p>The API endpoint used is: `https://api.water.noaa.gov/nwps/v1/reaches/{reachId}/streamflow?series=short_range`.  The `{reachId}` portion is replaced with the Reach ID entered by the user.</p>
    <p>The code first fetches the data from the API.  It then parses the JSON response and extracts the timestamps and flow values.  These values are then used to populate the table and create the chart. The chart is a line graph showing the streamflow over time.</p>
    </section>
  </div>

<script>
  document.querySelectorAll('a').forEach(link => {
    link.setAttribute('target', '_blank');
    link.setAttribute('rel', 'noopener noreferrer');
  });
</script>
  <script src="reachid.js"></script> </body>
</html>
